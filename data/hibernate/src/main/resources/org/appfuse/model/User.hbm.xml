<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="org.appfuse.model.User" table="app_user">
        <id name="id" column="id" unsaved-value="null">
            <generator class="native"/>
        </id>

        <version name="version" column="version" type="java.lang.Integer"/>

        <property name="username" length="50" not-null="true" unique="true"/>
        <property name="password" column="password" not-null="true"/>
        <property name="passwordHint" column="password_hint"/>
        <property name="firstName" column="first_name" length="50" not-null="true"/>
        <property name="lastName" column="last_name" length="50" not-null="true"/>
        <property name="email" not-null="true" unique="true"/>
        <property name="phoneNumber" column="phone_number"/>
        <property name="website" column="website"/>

        <component name="address">
            <property name="address" column="address" length="150"/>
            <property name="city" column="city" length="50" not-null="true"/>
            <property name="province" column="province" length="100"/>
            <property name="country" column="country" length="100"/>
            <property name="postalCode" column="postal_code" length="15" not-null="true"/>
        </component>

        <set name="roles" table="user_role" lazy="false" cascade="save-update">
            <key column="user_id"/>
            <many-to-many class="org.appfuse.model.Role" column="role_id" outer-join="auto"/>
        </set>

        <property name="enabled" type="yes_no" column="account_enabled"/>
        <property name="accountExpired" type="yes_no" column="account_expired" not-null="true"/>
        <property name="accountLocked" type="yes_no" column="account_locked" not-null="true"/>
        <property name="credentialsExpired" type="yes_no" column="credentials_expired" not-null="true"/>
    </class>
</hibernate-mapping>

